(self.webpackChunkaqualuxe_theme=self.webpackChunkaqualuxe_theme||[]).push([[567],{899:function(){!function(e){"use strict";var t={init:function(){this.initMetaBoxes(),this.initTaxonomyFields(),this.initColorPickers(),this.initMediaUploaders(),this.initDemoImporter(),this.initSettingsTabs(),this.initDashboardWidgets(),this.initBookingManager(),e(document).trigger("aqualuxe:admin-loaded")},initMetaBoxes:function(){e("#aqualuxe_service_featured").on("change",function(){var t=e("#featured-service-notice");e(this).is(":checked")?0===t.length&&e(this).parent().after('<p id="featured-service-notice" class="description" style="color: #d63638;">This service will be highlighted on the homepage.</p>'):t.remove()}),e("#aqualuxe_project_gallery").on("input",function(){var t=e(this).val().split(",").filter(function(e){return e.trim()}),a=e("#gallery-preview");t.length>0&&0===a.length?e(this).after('<div id="gallery-preview" class="gallery-preview" style="margin-top: 10px;"><small>Gallery will contain '+t.length+" images</small></div>"):0===t.length?a.remove():a.find("small").text("Gallery will contain "+t.length+" images")}),e("#aqualuxe_event_start_date, #aqualuxe_event_end_date").on("change",function(){var t=new Date(e("#aqualuxe_event_start_date").val()),a=new Date(e("#aqualuxe_event_end_date").val());t&&a&&a<t&&(alert("End date cannot be before start date."),e("#aqualuxe_event_end_date").val(""))}),e("#aqualuxe_booking_status").on("change",function(){var t=e(this).val();e("#aqualuxe_booking_customer_email").val()&&["confirmed","cancelled"].includes(t)&&(confirm("Would you like to send an email notification to the customer?")&&console.log("Sending notification email for status:",t))})},initTaxonomyFields:function(){"undefined"!=typeof wp&&wp.media&&e(".icon-picker").on("click",function(t){t.preventDefault();var a=e(this).siblings("input"),i='<div class="icon-picker-modal"><h3>Select an Icon</h3><div class="icon-grid">';["fas fa-fish","fas fa-leaf","fas fa-tools","fas fa-flask","fas fa-water","fas fa-seedling","fas fa-cog","fas fa-heart","fas fa-star","fas fa-fire","fas fa-snowflake","fas fa-sun"].forEach(function(e){i+='<button type="button" class="icon-option" data-icon="'.concat(e,'"><i class="').concat(e,'"></i></button>')}),i+='</div><button type="button" class="button icon-picker-close">Close</button></div>',e("body").append(i),e(".icon-option").on("click",function(){var t=e(this).data("icon");a.val(t),e(".icon-picker-modal").remove()}),e(".icon-picker-close").on("click",function(){e(".icon-picker-modal").remove()})})},initColorPickers:function(){e.fn.wpColorPicker&&e(".color-picker").wpColorPicker({change:function(t,a){var i=a.color.toString();e(this).val(i).trigger("change")}})},initMediaUploaders:function(){"undefined"!=typeof wp&&wp.media&&(e(".media-upload-button").on("click",function(t){t.preventDefault();var a=e(this),i=a.siblings("input"),n=a.siblings(".media-preview"),o=wp.media({title:"Select Media",button:{text:"Use this media"},multiple:!1});o.on("select",function(){var e=o.state().get("selection").first().toJSON();i.val(e.id),"image"===e.type?n.html('<img src="'.concat(e.sizes.thumbnail.url,'" alt="" style="max-width: 100px;">')):n.html("<p>".concat(e.filename,"</p>"))}),o.open()}),e(".media-remove-button").on("click",function(t){t.preventDefault(),e(this).siblings("input").val(""),e(this).siblings(".media-preview").empty()}))},initDemoImporter:function(){var t=!1;e("#aqualuxe-demo-import").on("click",function(a){if(a.preventDefault(),!t){var i=e(this),n=i.text(),o=e("#import-progress"),s=e("#import-log");confirm("This will import demo content and may overwrite existing data. Continue?")&&(t=!0,i.text("Importing...").prop("disabled",!0),o.show(),s.empty(),this.runDemoImport(0,function(e){t=!1,i.text(n).prop("disabled",!1),o.hide(),e?s.append('<p style="color: green;">Import completed successfully!</p>'):s.append('<p style="color: red;">Import failed. Please check the logs.</p>')}))}}),e("#aqualuxe-demo-flush").on("click",function(t){if(t.preventDefault(),confirm("This will delete ALL demo content and reset the site. This action cannot be undone. Continue?")){var a=e(this),i=a.text();a.text("Flushing...").prop("disabled",!0),e.ajax({url:ajaxurl,type:"POST",data:{action:"aqualuxe_flush_demo_content",nonce:aqualuxe_admin.nonce},success:function(e){e.success?(alert("Demo content flushed successfully!"),location.reload()):alert("Flush failed: "+e.data)},error:function(){alert("Flush failed due to a network error.")},complete:function(){a.text(i).prop("disabled",!1)}})}})},runDemoImport:function(t,a){var i=this,n=["posts","pages","product-categories","products","services","events","subscriptions","auctions","vendors","franchise","research","testimonials","team","media","menus","customizer"];if(t>=n.length)a(!0);else{var o=n[t],s=Math.round(t/n.length*100);e("#import-progress .progress-bar").css("width",s+"%"),e("#import-log").append("<p>Importing ".concat(o,"...</p>")),e.ajax({url:ajaxurl,type:"POST",data:{action:"aqualuxe_import_demo_step",step:o,nonce:aqualuxe_admin.nonce},success:function(n){n.success?(e("#import-log").append('<p style="color: green;">✓ '.concat(o," imported successfully</p>")),i.runDemoImport(t+1,a)):(e("#import-log").append('<p style="color: red;">✗ Failed to import '.concat(o,": ").concat(n.data,"</p>")),a(!1))},error:function(){e("#import-log").append('<p style="color: red;">✗ Network error importing '.concat(o,"</p>")),a(!1)}})}},initSettingsTabs:function(){e(".nav-tab").on("click",function(t){t.preventDefault();var a=e(this).attr("href");e(".nav-tab").removeClass("nav-tab-active"),e(this).addClass("nav-tab-active"),e(".settings-section").hide(),e(a).show(),window.history.replaceState(null,null,a)});var t=window.location.hash;t&&e(t).length?e('.nav-tab[href="'+t+'"]').click():e(".nav-tab").first().click()},initDashboardWidgets:function(){e(".refresh-stats").on("click",function(t){t.preventDefault();var a=e(this),i=a.closest(".dashboard-widget");a.prop("disabled",!0),i.addClass("loading"),e.ajax({url:ajaxurl,type:"POST",data:{action:"aqualuxe_refresh_stats",nonce:aqualuxe_admin.nonce},success:function(e){e.success&&i.find(".stats-grid").html(e.data.html)},complete:function(){a.prop("disabled",!1),i.removeClass("loading")}})})},initBookingManager:function(){e(".booking-status-quick").on("change",function(){var t=e(this).data("booking-id"),a=e(this).val(),i=e(this).closest("tr");e.ajax({url:ajaxurl,type:"POST",data:{action:"aqualuxe_update_booking_status",booking_id:t,status:a,nonce:aqualuxe_admin.nonce},success:function(t){if(t.success){i.find(".status-indicator").removeClass().addClass("status-indicator status-"+a);var n=e('<div class="notice notice-success is-dismissible"><p>Booking status updated successfully!</p></div>');e(".wrap h1").after(n),setTimeout(function(){n.fadeOut()},3e3)}else alert("Failed to update booking status: "+t.data)},error:function(){alert("Failed to update booking status due to network error.")}})}),e("#booking-calendar").length&&this.initBookingCalendar()},initBookingCalendar:function(){e("#booking-calendar").html("<p>Calendar integration would be implemented here with FullCalendar or similar library.</p>")}};e(document).ready(function(){t.init()}),window.AquaLuxeAdmin=t}(jQuery)}},function(e){var t;t=899,e(e.s=t)}]);